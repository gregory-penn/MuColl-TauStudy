<?xml version="1.0" encoding="us-ascii"?>
<marlin xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="http://ilcsoft.desy.de/marlin/marlin.xsd">
  <constants>
    <!-- define constants here - use in steering file as ${ConstantName} --> 
    <!--constant name="DetectorModel" value="ILD_l5_o1_v02" /-->
  </constants>

  <execute>
    <processor name="MyAIDAProcessor" />
    <processor name = "EventNumber" />

    <processor name = "InitDD4hep"/>

    <!-- ========== TrackerDigitization.xml  ========== -->
    <processor name="VXDBarrelDigitiser"/> 
    <processor name="VXDEndcapDigitiser"/>
    <processor name="InnerPlanarDigiProcessor"/>
    <processor name="InnerEndcapPlanarDigiProcessor"/>
    <processor name="OuterPlanarDigiProcessor"/>
    <processor name="OuterEndcapPlanarDigiProcessor"/>

    <!-- ========== Tracking.xml  ========== -->
    <processor name="CKFTracking"/>
    <!--processor name="MyTrackTruth"/-->
    <processor name="TrackDeduper"/>
    <processor name="Refit"/>

    <!-- ========== CaloDigitization.xml ============ -->
    <processor name="DDCaloDigi"/>
    <processor name="DDSimpleMuonDigi"/>
    <processor name="DDMarlinPandora"/>

    <!--===========PFO=============-->
    <group name = "PfoSelector"/>

    <!--===========VertexJet======-->
    <processor name = "FastJetProcessor"/>

    <!--==========TauSpecific======== -->
    <processor name = "MyTauFinder"/>
    <processor name = "MyTaJetClustering"/>

    <!--=========OUTPUT=========-->
    <processor name="MergeTHits"/>
    <processor name="AllPFOs" />
    <processor name = "Output_REC" />
    
  </execute>

  <global>
    <parameter name = "LCIOInputFiles" > ../.slcio </parameter>
    <parameter name = "MaxRecordNumber" value = "-1" />
    <!--<parameter name = "SkipNEvents" value = "3" />-->
    <parameter name = "Verbosity" options="DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT"> ERROR </parameter>
  </global>

  <!--include ref="subconfigs/InitDD4hep.xml"/-->
  <processor name="InitDD4hep" type="InitializeDD4hep">
 <!--InitializeDD4hep reads a compact xml file and initializes the dd4hep::Detector object-->
  <!--Name of the DD4hep compact xml file to load-->
  <parameter name="DD4hepXMLFile" type="string">
  /work/rosep8/MuC-Tutorial/reconstruction/MuColl_v1/MuColl_mod.xml 

 </parameter>
  <!--Alternate name for EncodingStringParameterName-->
  <!--If given, the Compact File parameter of that name will be used as argument to LCTrackerCellID::set_encoding_string()-->
  <parameter name="EncodingStringParameterName" type="string"> GlobalTrackerReadoutID  </parameter>
  <!--verbosity level of this processor ("DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT")-->
  <parameter name="Verbosity" type="string">ERROR </parameter>
</processor>
  <include ref="subconfigs/Overlay.xml"/>
  <include ref="subconfigs/PandoraSettingsDefault.xml"/>


  <processor name="Output_REC" type="LCIOOutputProcessor">
    <!--   standard output: keep all collections -->
    <parameter name="LCIOOutputFile" type="string"> HPFlatT_NEWEST.slcio </parameter>
    <parameter name="FullSubsetCollections" type="StringVec"> </parameter>
    <parameter name="LCIOWriteMode" type="string" value="WRITE_NEW"/>
    <!--<parameter name="SplitFileSizekB" type="int">996147 </parameter> we don't want to split-->
    <parameter name="Verbosity" type="string">ERROR </parameter>
    <parameter name="DropCollectionNames" type="StringVec">  </parameter>
    <parameter name="DropCollectionTypes" type="StringVec">
      VertexBarrelCollection
      VertexEndcapCollection
      InnerTrackerBarrelCollection
      InnerTrackerEndcapCollection
      OuterTrackerBarrelCollection
      OuterTrackerEndcapCollection
    </parameter>
    <parameter name="KeepCollectionNames" type="StringVec">
      VDXTrackerHits
      VXDEndcapTrackerHits
      ITrackerHits
      ITrackerEndcapHits
      OTrackerHits
      OTrackerEndcapHits
      SiTracks
      JetOut
      TauRec_PFO
      MCParticle
    </parameter>
  </processor>

  <processor name="EventNumber" type="Statusmonitor">
    <parameter name="HowOften" type="int">1000 </parameter>
    <!--parameter name="Verbosity" type="string"> ERROR </parameter-->
  </processor>

  <!--=============TRACKING CONFIGS=============-->


  <processor name="VXDBarrelDigitiser" type="DDPlanarDigiProcessor">
    <parameter name="SubDetectorName" type="string"> Vertex </parameter>
    <!--PlanarDigiProcessor creates TrackerHits from SimTrackerHits, smearing them according to the input parameters.-->
    <!--whether hits are 1D strip hits-->
    <parameter name="IsStrip" type="bool">false </parameter>
    <!--resolution in direction of u-->
    <parameter name="ResolutionU" type="float"> 0.005 </parameter>
    <!--resolution in direction of v-->
    <parameter name="ResolutionV" type="float"> 0.005 </parameter>
    <!--Name of the Input SimTrackerHit collection-->
    <parameter name="SimTrackHitCollectionName" type="string" lcioInType="SimTrackerHit"> VertexBarrelCollection </parameter>
    <!--Name of TrackerHit SimTrackHit relation collection-->
    <parameter name="SimTrkHitRelCollection" type="string" lcioOutType="LCRelation"> VXDTrackerHitRelations </parameter>
    <!--Name of the TrackerHit output collection-->
    <parameter name="TrackerHitCollectionName" type="string" lcioOutType="TrackerHitPlane"> VXDTrackerHits </parameter>
    <!--resolution in time-->
    <parameter name="ResolutionT" type="FloatVec"> 0.03  </parameter>
    <!--resolution in direction of u - either one per layer or one for all layers -->
    <parameter name="UseTimeWindow" type="bool"> true </parameter>
    <!--Correct hit times for propagation: radial distance/c-->
    <parameter name="CorrectTimesForPropagation" type="bool" value="true"/>
    <!--Lower bound of the time window [ns]-->
    <parameter name="TimeWindowMin" type="float"> -0.09 </parameter>
    <!--Upper bound of the time window [ns]-->
    <parameter name="TimeWindowMax" type="float"> 0.15 </parameter>
    <!--verbosity level of this processor ("DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT")-->
    <parameter name="Verbosity" type="string"> ERROR </parameter>
  </processor>

  <processor name="VXDEndcapDigitiser" type="DDPlanarDigiProcessor">
    <parameter name="SubDetectorName" type="string"> Vertex </parameter>
    <!--PlanarDigiProcessor creates TrackerHits from SimTrackerHits, smearing them according to the input parameters.-->
    <!--whether hits are 1D strip hits-->
    <parameter name="IsStrip" type="bool">false </parameter>
    <!--resolution in direction of u-->
    <parameter name="ResolutionU" type="float"> 0.005 </parameter>
    <!--resolution in direction of v-->
    <parameter name="ResolutionV" type="float"> 0.005 </parameter>
    <!--Name of the Input SimTrackerHit collection-->
    <parameter name="SimTrackHitCollectionName" type="string" lcioInType="SimTrackerHit"> VertexEndcapCollection </parameter>
    <!--Name of TrackerHit SimTrackHit relation collection-->
    <parameter name="SimTrkHitRelCollection" type="string" lcioOutType="LCRelation"> VXDEndcapTrackerHitRelations </parameter>
    <!--Name of the TrackerHit output collection-->
    <parameter name="TrackerHitCollectionName" type="string" lcioOutType="TrackerHitPlane"> VXDEndcapTrackerHits </parameter>
    <!--resolution in time-->
    <parameter name="ResolutionT" type="FloatVec"> 0.03  </parameter>
    <!--resolution in direction of u - either one per layer or one for all layers -->
    <parameter name="UseTimeWindow" type="bool"> true </parameter>
    <!--Correct hit times for propagation: radial distance/c-->
    <parameter name="CorrectTimesForPropagation" type="bool" value="true"/>
    <!--Lower bound of the time window [ns]-->
    <parameter name="TimeWindowMin" type="float"> -0.09 </parameter>
    <!--Upper bound of the time window [ns]-->
    <parameter name="TimeWindowMax" type="float"> 0.15 </parameter>
    <!--verbosity level of this processor ("DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT")-->
    <parameter name="Verbosity" type="string"> ERROR </parameter>
  </processor>

  <processor name="FilterDL_VXDB" type="FilterDoubleLayerHits">
    <parameter name="FillHistograms" type="bool" value="true" />
    <parameter name="SubDetectorName" type="string" value="Vertex" />
    <!-- Name of the input hit collection -->
    <parameter name="InputCollection" type="string" value="VXDTrackerHits" />
    <!-- Name of the output filtered hit collection -->
    <parameter name="OutputCollection" type="string" value="VXDTrackerHits_DLFiltered" />
    <!-- Configuration of the maximum dX and dTheta between a pair of hits at the inner and outer layer -->
    <!-- 4 numbers per double-layer: <inner layer ID>  <outer layer ID>  <dX max [mm]>  <dTheta max [mrad]> -->
    <parameter name="DoubleLayerCuts" type="StringVec">
      0 1 1.0 0.6
      2 3 1.0 0.33
      4 5 1.0 0.27
      6 7 1.0 0.21
    </parameter>
    <parameter name="Verbosity" type="string"> ERROR </parameter>
  </processor>

  <processor name="FilterDL_VXDE" type="FilterDoubleLayerHits">
    <parameter name="FillHistograms" type="bool" value="true" />
    <parameter name="SubDetectorName" type="string" value="Vertex" />
    <!-- Name of the input hit collection -->
    <parameter name="InputCollection" type="string" value="VXDEndcapTrackerHits" />
    <!-- Name of the output filtered hit collection -->
    <parameter name="OutputCollection" type="string" value="VXDEndcapTrackerHits_DLFiltered" />
    <!-- Configuration of the maximum dX and dTheta between a pair of hits at the inner and outer layer -->
    <!-- 4 numbers per double-layer: <inner layer ID>  <outer layer ID>  <dX max [mm]>  <dTheta max [mrad]> -->
    <parameter name="DoubleLayerCuts" type="StringVec">
      0 1 1.0 0.21
      2 3 1.0 0.18
      4 5 0.8 0.12
      6 7 0.6 0.12
    </parameter>
    <parameter name="Verbosity" type="string"> ERROR </parameter>
  </processor>

  <processor name="InnerPlanarDigiProcessor" type="DDPlanarDigiProcessor">
    <!--PlanarDigiProcessor creates TrackerHits from SimTrackerHits, smearing them according to the input parameters.-->
    <parameter name="SubDetectorName" type="string"> InnerTrackers </parameter>
    <!--whether hits are 1D strip hits-->
    <parameter name="IsStrip" type="bool"> false </parameter>
    <!--resolution in direction of u-->
    <parameter name="ResolutionU" type="float"> 0.007 </parameter>
    <!--resolution in direction of v-->
    <parameter name="ResolutionV" type="float"> 0.09 </parameter>
    <!--Name of the Input SimTrackerHit collection-->
    <parameter name="SimTrackHitCollectionName" type="string" lcioInType="SimTrackerHit"> InnerTrackerBarrelCollection </parameter>
    <!--Name of TrackerHit SimTrackHit relation collection-->
    <parameter name="SimTrkHitRelCollection" type="string" lcioOutType="LCRelation"> InnerTrackerBarrelHitsRelations </parameter>
    <!--Name of the TrackerHit output collection-->
    <parameter name="TrackerHitCollectionName" type="string" lcioOutType="TrackerHitPlane"> ITrackerHits </parameter>
    <!--resolution in time-->
    <parameter name="ResolutionT" type="FloatVec"> 0.06  </parameter>
    <!--resolution in direction of u - either one per layer or one for all layers -->
    <parameter name="UseTimeWindow" type="bool"> true </parameter>
    <!--Correct hit times for propagation: radial distance/c-->
    <parameter name="CorrectTimesForPropagation" type="bool" value="true"/>
    <!--Lower bound of the time window [ns]-->
    <parameter name="TimeWindowMin" type="float"> -0.18 </parameter>
    <!--Upper bound of the time window [ns]-->
    <parameter name="TimeWindowMax" type="float"> 0.3 </parameter>
    <!--verbosity level of this processor ("DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT")-->
    <parameter name="Verbosity" type="string"> ERROR </parameter>
  </processor>

  <processor name="InnerEndcapPlanarDigiProcessor" type="DDPlanarDigiProcessor">
    <!--PlanarDigiProcessor creates TrackerHits from SimTrackerHits, smearing them according to the input parameters.-->
    <parameter name="SubDetectorName" type="string"> InnerTrackers </parameter>
    <!--whether hits are 1D strip hits-->
    <parameter name="IsStrip" type="bool"> false </parameter>
    <!--resolution in direction of u-->
    <parameter name="ResolutionU" type="float"> 0.007 </parameter>
    <!--resolution in direction of v-->
    <parameter name="ResolutionV" type="float"> 0.09 </parameter>
    <!--Name of the Input SimTrackerHit collection-->
    <parameter name="SimTrackHitCollectionName" type="string" lcioInType="SimTrackerHit"> InnerTrackerEndcapCollection </parameter>
    <!--Name of TrackerHit SimTrackHit relation collection-->
    <parameter name="SimTrkHitRelCollection" type="string" lcioOutType="LCRelation"> InnerTrackerEndcapHitsRelations </parameter>
    <!--Name of the TrackerHit output collection-->
    <parameter name="TrackerHitCollectionName" type="string" lcioOutType="TrackerHitPlane"> ITrackerEndcapHits </parameter>
    <!--resolution in time-->
    <parameter name="ResolutionT" type="FloatVec"> 0.06 </parameter>
    <!--resolution in direction of u - either one per layer or one for all layers -->
    <parameter name="UseTimeWindow" type="bool"> true </parameter>
    <!--Correct hit times for propagation: radial distance/c-->
    <parameter name="CorrectTimesForPropagation" type="bool" value="true"/>
    <!--Lower bound of the time window [ns]-->
    <parameter name="TimeWindowMin" type="float"> -0.18 </parameter>
    <!--Upper bound of the time window [ns]-->
    <parameter name="TimeWindowMax" type="float"> 0.3 </parameter>
    <!--verbosity level of this processor ("DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT")-->
    <parameter name="Verbosity" type="string"> ERROR </parameter>
  </processor>

  <processor name="OuterPlanarDigiProcessor" type="DDPlanarDigiProcessor">
    <!--PlanarDigiProcessor creates TrackerHits from SimTrackerHits, smearing them according to the input parameters.-->
    <parameter name="SubDetectorName" type="string"> OuterTrackers </parameter>
    <!--whether hits are 1D strip hits-->
    <parameter name="IsStrip" type="bool"> false </parameter>
    <!--resolution in direction of u-->
    <parameter name="ResolutionU" type="float"> 0.007 </parameter>
    <!--resolution in direction of v-->
    <parameter name="ResolutionV" type="float"> 0.09 </parameter>
    <!--Name of the Input SimTrackerHit collection-->
    <parameter name="SimTrackHitCollectionName" type="string" lcioInType="SimTrackerHit"> OuterTrackerBarrelCollection </parameter>
    <!--Name of TrackerHit SimTrackHit relation collection-->
    <parameter name="SimTrkHitRelCollection" type="string" lcioOutType="LCRelation"> OuterTrackerBarrelHitsRelations </parameter>
    <!--Name of the TrackerHit output collection-->
    <parameter name="TrackerHitCollectionName" type="string" lcioOutType="TrackerHitPlane"> OTrackerHits </parameter>
    <!--resolution in time-->
    <parameter name="ResolutionT" type="FloatVec"> 0.06  </parameter>
    <!--resolution in direction of u - either one per layer or one for all layers -->
    <parameter name="UseTimeWindow" type="bool"> true </parameter>
    <!--Correct hit times for propagation: radial distance/c-->
    <parameter name="CorrectTimesForPropagation" type="bool" value="true"/>
    <!--Lower bound of the time window [ns]-->
    <parameter name="TimeWindowMin" type="float"> -0.18 </parameter>
    <!--Upper bound of the time window [ns]-->
    <parameter name="TimeWindowMax" type="float"> 0.3 </parameter>
    <!--verbosity level of this processor ("DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT")-->
    <parameter name="Verbosity" type="string"> ERROR </parameter>
  </processor>

  <processor name="OuterEndcapPlanarDigiProcessor" type="DDPlanarDigiProcessor">
    <!--PlanarDigiProcessor creates TrackerHits from SimTrackerHits, smearing them according to the input parameters.-->
    <parameter name="SubDetectorName" type="string"> OuterTrackers </parameter>
    <!--whether hits are 1D strip hits-->
    <parameter name="IsStrip" type="bool"> false </parameter>
    <!--resolution in direction of u-->
    <parameter name="ResolutionU" type="float"> 0.007 </parameter>
    <!--resolution in direction of v-->
    <parameter name="ResolutionV" type="float"> 0.09 </parameter>
    <!--Name of the Input SimTrackerHit collection-->
    <parameter name="SimTrackHitCollectionName" type="string" lcioInType="SimTrackerHit"> OuterTrackerEndcapCollection </parameter>
    <!--Name of TrackerHit SimTrackHit relation collection-->
    <parameter name="SimTrkHitRelCollection" type="string" lcioOutType="LCRelation"> OuterTrackerEndcapHitsRelations </parameter>
    <!--Name of the TrackerHit output collection-->
    <parameter name="TrackerHitCollectionName" type="string" lcioOutType="TrackerHitPlane"> OTrackerEndcapHits </parameter>
    <!--resolution in time-->
    <parameter name="ResolutionT" type="FloatVec"> 0.06  </parameter>
    <!--resolution in direction of u - either one per layer or one for all layers -->
    <parameter name="UseTimeWindow" type="bool"> true </parameter>
    <!--Correct hit times for propagation: radial distance/c-->
    <parameter name="CorrectTimesForPropagation" type="bool" value="true"/>
    <!--Lower bound of the time window [ns]-->
    <parameter name="TimeWindowMin" type="float"> -1 </parameter>
    <!--Upper bound of the time window [ns]-->
    <parameter name="TimeWindowMax" type="float"> 1 </parameter>
    <!--verbosity level of this processor ("DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT")-->
    <parameter name="Verbosity" type="string"> ERROR </parameter>
  </processor>

  <processor name="CKFTracking" type="ACTSSeededCKFTrackingProc">
    <!-- Path to material description -->
    <parameter name="MatFile" type="string">
      /opt/ilcsoft/muonc/ACTSTracking/v1.0.0/data/material-maps.json
    </parameter>
    <!-- Path to tracking geometry -->
    <parameter name="TGeoFile" type="string">
      /opt/ilcsoft/muonc/ACTSTracking/v1.0.0/data/MuColl_v1.root
    </parameter>
    <!-- Vol Layer, use -1 for all, ACTS numbers -->
    <parameter name="SeedingLayers" type="string">
      13 2
      13 6
      13 10
      13 14
      14  2
      14  6
      14 10
      14 14
      15  2
      15  6
      15 10
      15 14
    </parameter>
    <parameter name="SeedFinding_RMax" type="float">160</parameter>
    <parameter name="SeedFinding_DeltaRMin" type="float">1</parameter>
    <parameter name="SeedFinding_DeltaRMax" type="float">120</parameter>
    <parameter name="SeedFinding_CollisionRegion" type="float">1</parameter>
    <parameter name="SeedFinding_RadLengthPerSeed" type="float">0.1</parameter>
    <parameter name="SeedFinding_SigmaScattering" type="float">50</parameter>
    <parameter name="SeedFinding_MinPt" type="float">90</parameter>
    <!-- CKF Configuration -->
    <parameter name="CKF_Chi2CutOff" type="float">30</parameter>
    <parameter name="CKF_NumMeasurementsCutOff" type="int">20</parameter>
    <!--Define input tracker hits and relations. NB. Order must be respected -->
    <parameter name="TrackerHitCollectionNames" type="StringVec" lcioInType="TrackerHitPlane">
      VXDTrackerHits
      VXDEndcapTrackerHits
      ITrackerHits
      ITrackerEndcapHits
      OTrackerHits
      OTrackerEndcapHits
    </parameter>
    <!--Track Collection Names-->
    <parameter name="RunCKF" type="bool">True</parameter>
    <parameter name="TrackCollectionName" type="string" lcioOutType="Track">AllTracks</parameter>
    <parameter name="Verbosity" type="string">DEBUG</parameter>
  </processor>

<processor name="MyTrackTruth" type="TrackTruthProc">
  <parameter name="TrackCollection" type="string" lcioInType="Track">AllTracks</parameter>
  <parameter name="MCParticleCollection" type="string" lcioInType="MCParticle">MCParticle</parameter>
  <parameter name="TrackerHits2SimTrackerHitRelationName" type="StringVec" lcioInType="LCRelation">
    VertexBarrelTrackerHitsRelations
    InnerBarrelTrackerHitsRelations
    OuterBarrelTrackerHitsRelations
    VertexEndcapTrackerHitsRelations
    InnerEndcapTrackerHitsRelations
    OuterEndcapTrackerHitsRelations
  </parameter>
  <parameter name="Particle2TrackRelationName" type="string" lcioOutType="LCRelation"> MCParticle_Tracks </parameter>
</processor>

  <processor name="TrackDeduper" type="ACTSDuplicateRemoval">
    <parameter name="InputTrackCollectionName" type="string" lcioOutType="Track">AllTracks</parameter>
    <parameter name="OutputTrackCollectionName" type="string" lcioOutType="Track">SiTracks</parameter>
  </processor>


  <processor name="Refit" type="RefitFinal">
    <!--Refit processor that calls finaliseLCIOTrack after taking the track state from the existing track. No re-sorting of hits is done-->
    <!--Use Energy Loss in Fit-->
    <parameter name="EnergyLossOn" type="bool"> true </parameter>
    <!--Add extra cuts on the reduced ChiSquare and Nhits -->
    <parameter name="DoCutsOnRedChi2Nhits" type="bool"> true </parameter>
    <!--Cut on the reduced chi square-->
    <parameter name="ReducedChi2Cut" type="double"> 5. </parameter>
    <!--Cuts on Nhits: <detID>,<detID>,... <lower threshold> -->
    <parameter name="NHitsCuts" type="StringVec">
      1,2 1
      3,4 0
      5,6 0
    </parameter>


    <!--Name of the input track to MCParticle relation collection-->
    <parameter name="InputRelationCollectionName" type="string" lcioInType="LCRelation"> SiTrackRelations </parameter>
    <!--Name of the input track collection-->
    <parameter name="InputTrackCollectionName" type="string" lcioInType="Track"> SiTracks </parameter>
    <!--maximum allowable chi2 increment when moving from one site to another-->
    <parameter name="Max_Chi2_Incr" type="double"> 1.79769e+30 </parameter>
    <!--Use MultipleScattering in Fit-->
    <parameter name="MultipleScatteringOn" type="bool"> true </parameter>
    <!--Refit Track to MCParticle relation collection Name-->
    <parameter name="OutputRelationCollectionName" type="string" lcioOutType="LCRelation">
      SiTracks_Refitted_Relation
    </parameter>
    <!--Name of the output track collection-->
    <parameter name="OutputTrackCollectionName" type="string" lcioOutType="Track">
      SiTracks_Refitted
    </parameter>
    <!--Identifier of the reference point to use for the fit initialisation, -1 means at 0 0 0-->
    <parameter name="ReferencePoint" type="int"> -1 </parameter>
    <!--Smooth All Mesurement Sites in Fit-->
    <parameter name="SmoothOn" type="bool"> false </parameter>
    <!--verbosity level of this processor ("DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT")-->
    <parameter name="Verbosity" type="string"> ERROR </parameter>
    <!--if true extrapolation in the forward direction (in-out), otherwise backward (out-in)-->
    <parameter name="extrapolateForward" type="bool"> true </parameter>
    <!--Final minimum number of track clusters-->
    <parameter name="MinClustersOnTrackAfterFit" type="int">1 </parameter>
  </processor>


  <processor name="FastJetProcessor" type="FastJetProcessor">
    <parameter name="algorithm" type="StringVec">kt_algorithm 0.7</parameter>
    <parameter name="clusteringMode" type="StringVec"> Inclusive 5</parameter>
    <parameter name="jetOut" type="string" lcioOutType="ReconstructedParticle">JetOut </parameter>
    <parameter name="recParticleIn" type="string" lcioInType="ReconstructedParticle"> PandoraPFOs </parameter>
    <parameter name="recombinationScheme" type="string">E_scheme </parameter>
  </processor>

  <processor name="MergeTHits" type="MergeCollections">
    <parameter name="InputCollections" type="StringVec">
      InnerTrackerBarrelCollection
      InnerTrackerEndcapCollection
      OuterTrackerBarrelCollection
      OuterTrackerEndcapCollection
      VertexBarrelCollection
      VertexEndcapCollection
    </parameter>
    <parameter name="OutputCollection" type="string"> AllSTH </parameter>
  </processor>

  <processor name="AllPFOs" type="MergeCollections">
    <parameter name="InputCollections" type="StringVec">
      PandoraPFOs
      PFOsFromJets
      TauRec_PFO
    </parameter>
    <parameter name="OutputCollection" type="string"> AllPFOs </parameter>
  </processor> 

  <!-- ========== Vertexing for flavour tagging (constrained) and vertex resolutions (unconstrained) ================================== -->

  <processor name="RenameCollection" type="MergeCollections">
    <parameter name="CollectionParameterIndex" type="int">0 </parameter>
    <parameter name="InputCollectionIDs" type="IntVec"> </parameter>
    <parameter name="InputCollections" type="StringVec"> PandoraPFOs </parameter>
    <parameter name="OutputCollection" type="string"> PFOsFromJets </parameter>
  </processor>

  <group name="Vertexing">
    <parameter name="Algorithms" type="stringVec"> PrimaryVertexFinder BuildUpVertex </parameter>
    <parameter name="ReadSubdetectorEnergies" type="int" value="0"/> <!-- true for ILD -->
    <parameter name="UpdateVertexRPDaughters" type="int" value="0"/> <!-- false for non-updative PandoraPFOs -->
    <parameter name="TrackHitOrdering" type="int" value="2"/> <!-- Track hit ordering: 0=ILD-LOI (default), 1=ILD-DBD, 2=CLICdet -->
    <parameter name="PrintEventNumber" type="int" value="1"/> <!-- 0 for not printing event number, n for printing every n events -->
    <!-- specify input collection names -->
    <parameter name="UseMCP" type="int" value="0" /> <!-- MC info not used -->
    <parameter name="MCPCollection" type="string" value="MCParticle" />
    <parameter name="MCPFORelation" type="string" value="RecoMCTruthLink" />
    <parameter name="MagneticField" type="float" value="4.0"/> <!-- CLIC B field -->
    <parameter name="BeamSizeX" type="float" value="40.E-6"/> <!-- CLIC beam sizes from CDR -->
    <parameter name="BeamSizeY" type="float" value="1.0E-6"/>
    <parameter name="BeamSizeZ" type="float" value="44E-3"/>
    <!-- parameters for primary vertex finder -->
    <parameter name="PrimaryVertexFinder.BeamspotSmearing" type="boolean" value="false" />
    <parameter name="PrimaryVertexFinder.TrackMaxD0" type="double" value="20." />
    <parameter name="PrimaryVertexFinder.TrackMaxZ0" type="double" value="20." />
    <parameter name="PrimaryVertexFinder.TrackMaxInnermostHitRadius" type="double" value="61" /><!-- obsolete? -->
    <parameter name="PrimaryVertexFinder.TrackMinVtxFtdHits" type="int" value="1" />
    <parameter name="PrimaryVertexFinder.Chi2Threshold" type="double" value="25." />
    <!-- irrelevant because of TrackMinVtxFtdHits = 1 -->
    <parameter name="PrimaryVertexFinder.TrackMinFtdHits" type="int" value="999999" />
    <parameter name="PrimaryVertexFinder.TrackMinVxdHits" type="double" value="999999" />
    <!-- No tracks with hits only in the main silicon tracker -->
    <parameter name="PrimaryVertexFinder.TrackMinTpcHits" type="int" value="999999" />
    <parameter name="PrimaryVertexFinder.TrackMinTpcHitsMinPt" type="double" value="999999" />

    <!-- parameters for secondary vertex finder -->
    <parameter name="BuildUpVertex.TrackMaxD0" type="double" value="10." />
    <parameter name="BuildUpVertex.TrackMaxZ0" type="double" value="20." />
    <parameter name="BuildUpVertex.TrackMinPt" type="double" value="0.1" />
    <parameter name="BuildUpVertex.TrackMaxD0Err" type="double" value="0.1" />
    <parameter name="BuildUpVertex.TrackMaxZ0Err" type="double" value="0.1" />
    <parameter name="BuildUpVertex.TrackMinTpcHits" type="int" value="1" />
    <parameter name="BuildUpVertex.TrackMinTpcHitsMinPt" type="double" value="999999" /><!--FIXME-->
    <parameter name="BuildUpVertex.TrackMinFtdHits" type="int" value="1" />
    <parameter name="BuildUpVertex.TrackMinVxdHits" type="int" value="1" />
    <parameter name="BuildUpVertex.TrackMinVxdFtdHits" type="int" value="1" />
    <parameter name="BuildUpVertex.PrimaryChi2Threshold" type="double" value="25." />
    <parameter name="BuildUpVertex.SecondaryChi2Threshold" type="double" value="9." />
    <parameter name="BuildUpVertex.MassThreshold" type="double" value="10." />
    <parameter name="BuildUpVertex.MinDistFromIP" type="double" value="0.3" />
    <parameter name="BuildUpVertex.MaxChi2ForDistOrder" type="double" value="1.0" />
    <parameter name="BuildUpVertex.AssocIPTracks" type="int" value="1" />
    <parameter name="BuildUpVertex.AssocIPTracksMinDist" type="double" value="0." />
    <parameter name="BuildUpVertex.AssocIPTracksChi2RatioSecToPri" type="double" value="2.0" />
    <parameter name="BuildUpVertex.UseV0Selection" type="int" value="1" />
    <!-- Disable AVF -->
    <parameter name="BuildUpVertex.UseAVF" type="boolean" value="false" />
    <parameter name="BuildUpVertex.AVFTemperature" type="double" value="5.0" />

    <!-- Primary and Secondary vertex finder ================================================ -->
    <processor name="VertexFinder" type="LcfiplusProcessor">
      <!-- run primary and secondary vertex finders -->
      <parameter name="PFOCollection" type="string" value="PFOsFromJets" />
      <parameter name="PrimaryVertexCollectionName" type="string" value="PrimaryVertices" />
      <parameter name="BuildUpVertexCollectionName" type="string" value="BuildUpVertices" />
      <parameter name="BuildUpVertex.V0VertexCollectionName" type="string" value="BuildUpVertices_V0" />
      <parameter name="PrimaryVertexFinder.BeamspotConstraint" type="bool">1 </parameter>
    </processor>

    <!-- Primary and Secondary vertex finder for resolutions ================================= -->
    <processor name="VertexFinderUnconstrained" type="LcfiplusProcessor">
      <!-- run primary and secondary vertex finders -->
      <parameter name="PFOCollection" type="string" value="TightSelectedPandoraPFOs" />
      <parameter name="PrimaryVertexCollectionName" type="string" value="PrimaryVertices_res" />
      <parameter name="BuildUpVertexCollectionName" type="string" value="BuildUpVertices_res" />
      <parameter name="BuildUpVertex.V0VertexCollectionName" type="string" value="BuildUpVertices_V0_res" />
      <parameter name="PrimaryVertexFinder.BeamspotConstraint" type="bool">0 </parameter>
    </processor>
  </group>


  <processor name="JetClusteringAndRefiner" type="LcfiplusProcessor">
    <parameter name="Algorithms" type="stringVec"> JetClustering JetVertexRefiner </parameter>
    <!-- general parameters -->
    <parameter name="PFOCollection" type="string" value="PFOsFromJets" /> <!-- input PFO collection -->
    <parameter name="UseMCP" type="int" value="0" /> <!-- MC info not used -->
    <parameter name="MCPCollection" type="string" value="MCParticle" />
    <parameter name="MCPFORelation" type="string" value="RecoMCTruthLink" />
    <parameter name="ReadSubdetectorEnergies" type="int" value="0"/> <!-- true for ILD -->
    <parameter name="UpdateVertexRPDaughters" type="int" value="0"/> <!-- false for non-updative PandoraPFOs -->
    <parameter name="TrackHitOrdering" type="int" value="2"/> <!-- Track hit ordering: 0=ILD-LOI (default), 1=ILD-DBD, 2=CLICdet -->
    <parameter name="PrintEventNumber" type="int" value="1"/> <!-- 0 for not printing event number, n for printing every n events -->
    <parameter name="MagneticField" type="float" value="4.0"/> <!-- ILC and CLIC detectors have different values -->
    <!-- jet clustering parameters -->
    <parameter name="JetClustering.PrimaryVertexCollectionName" type="string" value="PrimaryVertices" /> <!-- Needed for post 00.06.09 -->
    <parameter name="JetClustering.InputVertexCollectionName" type="string" value="BuildUpVertices" /> <!-- vertex collections to be used in JC -->
    <parameter name="JetClustering.OutputJetCollectionName" type="stringVec" value="VertexJets" /> <!-- output collection name, may be multiple -->
    <parameter name="JetClustering.NJetsRequested" type="intVec" value="4" /> <!-- Multiple NJets can be specified -->
    <parameter name="JetClustering.YCut" type="doubleVec" value="0." /> <!-- specify 0 if not used -->
    <parameter name="JetClustering.UseMuonID" type="int" value="1" /> <!-- jet-muon ID for jet clustering -->
    <parameter name="JetClustering.VertexSelectionMinimumDistance" type="double" value="0.3" /> <!-- in mm -->
    <parameter name="JetClustering.VertexSelectionMaximumDistance" type="double" value="30." /> <!-- in mm -->
    <parameter name="JetClustering.VertexSelectionK0MassWidth" type="double" value="0.02" /> <!-- in GeV -->
    <parameter name="JetClustering.YAddedForJetVertexVertex" type="double" value="100"/> <!-- add penalty for combining vertices -->
    <parameter name="JetClustering.YAddedForJetLeptonVertex" type="double" value="100"/> <!-- add penalty for combining lepton and vertex -->
    <parameter name="JetClustering.YAddedForJetLeptonLepton" type="double" value="100"/> <!-- add penalty for combining leptons -->

    <parameter name="JetClustering.JetAlgorithm" type="string" value="ValenciaVertex" /> <!-- jet algorithm -->
    <parameter name="JetClustering.UseBeamJets" type="int" value="1" /> <!-- beam jet rejection -->
    <parameter name="JetClustering.AlphaParameter" type="double" value="1.0" />
    <parameter name="JetClustering.BetaParameter" type="double" value="1.0" />
    <parameter name="JetClustering.GammaParameter" type="double" value="1.0" />
    <parameter name="JetClustering.RParameter" type="double" value="1.0" />
    <parameter name="JetClustering.OutputJetStoresVertex" type="int" value="0" />
    <parameter name="JetClustering.YAddedForJetVertexLepton" type="int" value="0" />
    <parameter name="JetClustering.MuonIDExternal" type="int" value="0" />
    <parameter name="JetClustering.MuonIDMinimumEnergy" type="double" value="5.0" />
    <parameter name="JetClustering.MuonIDMinimumEnergy" type="int" value="0" />
    <parameter name="JetClustering.MuonIDMinimumD0Significance" type="double" value="5.0" />
    <parameter name="JetClustering.MuonIDMinimumZ0Significance" type="double" value="5.0" />
    <parameter name="JetClustering.MuonIDMaximum3DImpactParameter" type="double" value="5.0" />
    <parameter name="JetClustering.MuonIDMinimumProbability" type="double" value="0.5" />
    <parameter name="JetClustering.MaxNumberOfJetsForYThreshold" type="int" value="10" />

    <!-- vertex refiner parameters -->
    <parameter name="JetVertexRefiner.InputJetCollectionName" type="string" value="VertexJets" />
    <parameter name="JetVertexRefiner.OutputJetCollectionName" type="string" value="RefinedVertexJets" />
    <parameter name="JetVertexRefiner.PrimaryVertexCollectionName" type="string" value="PrimaryVertices" />
    <parameter name="JetVertexRefiner.InputVertexCollectionName" type="string" value="BuildUpVertices" />
    <parameter name="JetVertexRefiner.V0VertexCollectionName" type="string" value="BuildUpVertices_V0" />
    <parameter name="JetVertexRefiner.OutputVertexCollectionName" type="string" value="RefinedVertices" />
    <parameter name="JetVertexRefiner.MinPosSingle" type="double" value="0.3" />
    <parameter name="JetVertexRefiner.MaxPosSingle" type="double" value="30." />
    <parameter name="JetVertexRefiner.MinEnergySingle" type="double" value="1." />
    <parameter name="JetVertexRefiner.MaxAngleSingle" type="double" value="0.5" />
    <parameter name="JetVertexRefiner.MaxSeparationPerPosSingle" type="double" value="0.1" />
    <parameter name="JetVertexRefiner.mind0sigSingle" type="double" value="5." />
    <parameter name="JetVertexRefiner.minz0sigSingle" type="double" value="5." />
    <parameter name="JetVertexRefiner.OneVertexProbThreshold" type="double" value="0.001" />
    <parameter name="JetVertexRefiner.MaxCharmFlightLengthPerJetEnergy" type="double" value="0.1" />
    <parameter name="JetVertexRefiner.useBNess" type="bool" value="0" />
    <parameter name="JetVertexRefiner.BNessCut" type="double" value="-0.80" />
    <parameter name="JetVertexRefiner.BNessCutE1" type="double" value="-0.15" />
  </processor>

  <!--=================CALO CONFIGS==================-->
  <processor name="DDCaloDigi" type="DDCaloDigi">
    <!--Performs simple digitization of sim calo hits...-->

    <!--Hit times histograms-->
    <parameter name="Histograms" type="int">0 </parameter>
    <parameter name="RootFile" type="string">Digi_SiW.root</parameter>
    <!--CaloHit Relation Collection-->
    <parameter name="RelationOutputCollection" type="string" lcioOutType="LCRelation">RelationCaloHit </parameter>
    <!--energy required to create e-h pair in silicon (in eV)-->
    <parameter name="energyPerEHpair" type="float">3.6 </parameter>
    <!--verbosity level of this processor ("DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT")-->
    <parameter name="Verbosity" type="string">SILENT </parameter>

    <!-- ECAL -->

    <!--ECAL Collection Names-->
    <parameter name="ECALCollections" type="StringVec" lcioInType="SimCalorimeterHit">ECalBarrelCollection ECalEndcapCollection ECalPlugCollection </parameter>
    <!--ECAL Collection of real Hits-->
    <parameter name="ECALOutputCollection0" type="string" lcioOutType="CalorimeterHit">ECALBarrel </parameter>
    <!--ECAL Collection of real Hits-->
    <parameter name="ECALOutputCollection1" type="string" lcioOutType="CalorimeterHit">ECALEndcap </parameter>
    <!--ECAL Collection of real Hits-->
    <parameter name="ECALOutputCollection2" type="string" lcioOutType="CalorimeterHit">ECALOther </parameter>
    <!--Digital Ecal-->
    <parameter name="IfDigitalEcal" type="int">0 </parameter>
    <!--Index of ECal Layers-->
    <parameter name="ECALLayers" type="IntVec">41 100  </parameter>
    <!--default ECAL layer configuration (used if not found in gear file)-->
    <parameter name="ECAL_default_layerConfig" type="string">000000000000000 </parameter>
    <!--default number of virtual cells (used if not found in gear file)-->
    <parameter name="StripEcal_default_nVirtualCells" type="int">9 </parameter>

    <!--calibration to convert ECAL deposited energy to MIPs-->
    <parameter name="CalibECALMIP" type="float">0.0001 </parameter>
    <!--Calibration coefficients for ECAL-->
    <parameter name="CalibrECAL" type="FloatVec">35.8411424188 35.8411424188</parameter>
    <!--Threshold for ECAL Hits in GeV-->
    <parameter name="ECALThreshold" type="float">0.002 </parameter>
    <!--Unit for ECAL Threshold. Can be "GeV", "MIP" or "px". MIP and px need properly set calibration constants-->
    <parameter name="ECALThresholdUnit" type="string">GeV </parameter>
    <!--Energy correction for ECAL endcap-->
    <parameter name="ECALEndcapCorrectionFactor" type="float">1.0672142727</parameter>
    <!--Correct for ECAL gaps-->
    <parameter name="ECALGapCorrection" type="int">1 </parameter>
    <!--Factor applied to gap correction-->
    <parameter name="ECALGapCorrectionFactor" type="float">1 </parameter>
    <!--Factor applied to module gap correction-->
    <parameter name="ECALModuleGapCorrectionFactor" type="float">0.0 </parameter>
    <!--Ecal correction for theta dependency of calibration for MAPS-->
    <parameter name="MapsEcalCorrection" type="int">0 </parameter>

    <!--ECAL total number of MPPC/SiPM pixels for implementation of saturation effect-->
    <parameter name="ECAL_PPD_N_Pixels" type="int">10000 </parameter>
    <!--ECAL fractional uncertainty of effective total number of MPPC/SiPM pixels-->
    <parameter name="ECAL_PPD_N_Pixels_uncertainty" type="float">0.05 </parameter>
    <!--# Photo-electrons per MIP (scintillator): used to poisson smear #PEs if >0-->
    <parameter name="ECAL_PPD_PE_per_MIP" type="float">7 </parameter>
    <!--apply realistic digitisation to ECAL hits? (0=none, 1=silicon, 2=scintillator)-->
    <parameter name="ECAL_apply_realistic_digi" type="int">0 </parameter>
    <!--ECAL random dead cell fraction (as a fraction: 0->1) -->
    <parameter name="ECAL_deadCellRate" type="float">0 </parameter>
    <!--store dead ECAL cells in memory? (WARNING: can take a lot of memory if used...) -->
    <parameter name="ECAL_deadCell_memorise" type="bool">false </parameter>
    <!--typical electronics noise (ECAL, in MIP units)-->
    <parameter name="ECAL_elec_noise_mips" type="float">0 </parameter>
    <!--maximum of dynamic range for ECAL (in MIPs)-->
    <parameter name="ECAL_maxDynamicRange_MIP" type="float">2500 </parameter>
    <!--correlated ECAL random gaussian miscalibration (as a fraction: 1.0 = 100%) -->
    <parameter name="ECAL_miscalibration_correl" type="float">0 </parameter>
    <!--uncorrelated ECAL random gaussian miscalibration (as a fraction: 1.0 = 100%) -->
    <parameter name="ECAL_miscalibration_uncorrel" type="float">0 </parameter>
    <!--store oncorrelated ECAL miscalbrations in memory? (WARNING: can take a lot of memory if used...) -->
    <parameter name="ECAL_miscalibration_uncorrel_memorise" type="bool">false </parameter>
    <!--variation of mppc/sipm pixels capacitance in ECAL (as a fraction: 0.01=1%)-->
    <parameter name="ECAL_pixel_spread" type="float">0.05 </parameter>
    <!--length scale for absorbtion along scintillator strip (mm)-->
    <parameter name="ECAL_strip_absorbtionLength" type="float">1e+06 </parameter>

    <!--Use ECAL hit times-->
    <parameter name="UseEcalTiming" type="int">1 </parameter>
    <!--Correct ECAL hit times for propagation: radial distance/c-->
    <parameter name="ECALCorrectTimesForPropagation" type="int">1 </parameter>
    <!--ECAL Time Window minimum time in ns-->
    <parameter name="ECALTimeWindowMin" type="float">-1 </parameter>
    <!--ECAL BarrelTime Window maximum time in ns-->
    <parameter name="ECALBarrelTimeWindowMax" type="float">10 </parameter>
    <!--ECAL Endcap Time Window maximum time in ns-->
    <parameter name="ECALEndcapTimeWindowMax" type="float">10 </parameter>
    <!--Use simple time window cut on hit times? If false: use original hit-time clustering algorithm. If true: use time window defined by ECALBarrelTimeWindowMin and ECALBarrelTimeWindowMax-->
    <parameter name="ECALSimpleTimingCut" type="bool">true </parameter>
    <!--ECAL Minimum Delta Time in ns for resolving two hits--> <!-- used only if ECALSimpleTimingCut is false -->
    <parameter name="ECALDeltaTimeHitResolution" type="float">10 </parameter>
    <!--ECAL Time Resolution used to smear hit times-->
    <parameter name="ECALTimeResolution" type="float">10 </parameter>

    <!-- HCAL -->

    <!--HCAL Collection Names-->
    <parameter name="HCALCollections" type="StringVec" lcioInType="SimCalorimeterHit">HCalBarrelCollection HCalEndcapCollection HCalRingCollection </parameter>
    <!--HCAL Collection of real Hits-->
    <parameter name="HCALOutputCollection0" type="string" lcioOutType="CalorimeterHit">HCALBarrel </parameter>
    <!--HCAL Collection of real Hits-->
    <parameter name="HCALOutputCollection1" type="string" lcioOutType="CalorimeterHit">HCALEndcap </parameter>
    <!--HCAL Collection of real Hits-->
    <parameter name="HCALOutputCollection2" type="string" lcioOutType="CalorimeterHit">HCALOther </parameter>
    <!--Digital Hcal-->
    <parameter name="IfDigitalHcal" type="int">0 </parameter>
    <!--Index of HCal Layers-->
    <parameter name="HCALLayers" type="IntVec">100  </parameter>

    <!--calibration to convert HCAL deposited energy to MIPs-->
    <parameter name="CalibHCALMIP" type="float">0.0001 </parameter>
    <!--Calibration coefficients for Barrel HCAL-->
    <parameter name="CalibrHCALBarrel" type="FloatVec">49.2031079063</parameter>
    <!-- CalibrHcalBarrel Should be 38.995 for 17 mm -->
    <!--Calibration coefficients for EndCap HCAL-->
    <parameter name="CalibrHCALEndcap" type="FloatVec">53.6263377733</parameter>
    <!--Calibration coefficients for Other (Ring) HCAL-->
    <parameter name="CalibrHCALOther" type="FloatVec">62.2125698179</parameter>
    <!--Threshold for HCAL Hits in GeV-->
    <parameter name="HCALThreshold" type="FloatVec">0.002 </parameter>
    <!--Unit for HCAL Threshold. Can be "GeV", "MIP" or "px". MIP and px need properly set calibration constants-->
    <parameter name="HCALThresholdUnit" type="string">GeV </parameter>
    <!--Energy correction for HCAL endcap-->
    <parameter name="HCALEndcapCorrectionFactor" type="float">1.000 </parameter>
    <!--Correct for ECAL gaps-->
    <parameter name="HCALGapCorrection" type="int">1 </parameter>
    <!--Factor applied to module gap correction-->
    <parameter name="HCALModuleGapCorrectionFactor" type="float">0.5 </parameter>

    <!--HCAL total number of MPPC/SiPM pixels for implementation of saturation effect-->
    <parameter name="HCAL_PPD_N_Pixels" type="int">400 </parameter>
    <!--HCAL fractional uncertainty of effective total number of MPPC/SiPM pixels-->
    <parameter name="HCAL_PPD_N_Pixels_uncertainty" type="float">0.05 </parameter>
    <!--# Photo-electrons per MIP (for AHCAL): used to poisson smear #PEs if >0-->
    <parameter name="HCAL_PPD_PE_per_MIP" type="float">10 </parameter>
    <!--apply realistic digitisation to HCAL hits? (0=none, 1=scintillator/SiPM)-->
    <parameter name="HCAL_apply_realistic_digi" type="int">0 </parameter>
    <!--HCAL random dead cell fraction (as a fraction: 0->1) -->
    <parameter name="HCAL_deadCellRate" type="float">0 </parameter>
    <!--store dead HCAL cells in memory? (WARNING: can take a lot of memory if used...) -->
    <parameter name="HCAL_deadCell_memorise" type="bool">false </parameter>
    <!--typical electronics noise (HCAL, in MIP units)-->
    <parameter name="HCAL_elec_noise_mips" type="float">0 </parameter>
    <!--maximum of dynamic range for HCAL (in MIPs)-->
    <parameter name="HCAL_maxDynamicRange_MIP" type="float">200 </parameter>
    <!--correlated HCAL random gaussian miscalibration (as a fraction: 1.0 = 100%) -->
    <parameter name="HCAL_miscalibration_correl" type="float">0 </parameter>
    <!--uncorrelated HCAL random gaussian miscalibration (as a fraction: 1.0 = 100%) -->
    <parameter name="HCAL_miscalibration_uncorrel" type="float">0 </parameter>
    <!--store oncorrelated HCAL miscalbrations in memory? (WARNING: can take a lot of memory if used...) -->
    <parameter name="HCAL_miscalibration_uncorrel_memorise" type="bool">false </parameter>
    <!--variation of mppc/sipm pixels capacitance in HCAL (as a fraction: 0.01=1%)-->
    <parameter name="HCAL_pixel_spread" type="float">0 </parameter>

    <!--Use HCAL hit times-->
    <parameter name="UseHcalTiming" type="int">1 </parameter>
    <!--Correct HCAL hit times for propagation: radial distance/c-->
    <parameter name="HCALCorrectTimesForPropagation" type="int">1 </parameter>
    <!--HCAL Time Window minimum time in ns-->
    <parameter name="HCALTimeWindowMin" type="float">-1 </parameter>
    <!--HCAL Time Window maximum time in ns-->
    <parameter name="HCALBarrelTimeWindowMax" type="float">10 </parameter>
    <!--HCAL Time Window maximum time in ns-->
    <parameter name="HCALEndcapTimeWindowMax" type="float">10 </parameter>
    <!--Use simple time window cut on hit times? If false: use original hit-time clustering algorithm. If true: use time window defined by HCALBarrelTimeWindowMin and HCALBarrelTimeWindowMax-->
    <parameter name="HCALSimpleTimingCut" type="bool">true </parameter>
    <!--HCAL Minimum Delta Time in ns for resolving two hits--> <!-- used only if HCALSimpleTimingCut is false -->
    <parameter name="HCALDeltaTimeHitResolution" type="float">10 </parameter>
    <!--HCAL Time Resolution used to smear hit times-->
    <parameter name="HCALTimeResolution" type="float">10 </parameter>

  </processor>

  <!--DEFAULT SETTINGS-->

 <processor name="DDMarlinPandora" type="DDPandoraPFANewProcessor">
  <parameter name="PandoraSettingsXmlFile" type="String"> PandoraSettings/PandoraSettingsDefault.xml </parameter>
  <!-- CLIC specifict software compensation weights derived from K0L and neutrons -->
  <parameter name="SoftwareCompensationWeights" type="FloatVec">1.61741 -0.00444385 2.29683e-05 -0.0731236 -0.00157099 -7.09546e-07 0.868443 1.0561 -0.0238574</parameter>
  <parameter name="SoftwareCompensationEnergyDensityBins" type="FloatVec">0 2. 5. 7.5 9.5 13. 16. 20. 23.5 28. 33. 40. 50. 75. 100.</parameter>
  <parameter name="FinalEnergyDensityBin" type="float">110.</parameter>
  <parameter name="MaxClusterEnergyToApplySoftComp" type="float">2000.</parameter>
  <!-- Collection names -->
  <parameter name="TrackCollections" type="StringVec"> SiTracks_Refitted </parameter>
  <parameter name="ECalCaloHitCollections" type="StringVec">ECALBarrel ECALEndcap ECALOther</parameter>
  <parameter name="HCalCaloHitCollections" type="StringVec">HCALBarrel HCALEndcap HCALOther</parameter>
  <parameter name="MuonCaloHitCollections" type="StringVec">MUON</parameter>
  <parameter name="MCParticleCollections" type="StringVec">MCParticle</parameter>
  <parameter name="RelCaloHitCollections" type="StringVec">RelationCaloHit RelationMuonHit</parameter>
  <parameter name="RelTrackCollections" type="StringVec"> SiTracks_Refitted_Relation </parameter>
  <parameter name="KinkVertexCollections" type="StringVec">KinkVertices</parameter>
  <parameter name="ProngVertexCollections" type="StringVec">ProngVertices</parameter>
  <parameter name="SplitVertexCollections" type="StringVec">SplitVertices</parameter>
  <parameter name="V0VertexCollections" type="StringVec">V0Vertices</parameter>
  <parameter name="ClusterCollectionName" type="String">PandoraClusters</parameter>
  <parameter name="PFOCollectionName" type="String">PandoraPFOs</parameter>
  <!-- Calibration constants -->
  <parameter name="ECalToMipCalibration" type="float">181.818 </parameter>
  <parameter name="HCalToMipCalibration" type="float">40.8163</parameter>
  <parameter name="ECalMipThreshold" type="float">0.5</parameter>
  <parameter name="HCalMipThreshold" type="float">0.3</parameter>
  <parameter name="ECalToEMGeVCalibration" type="float">1.02373335516</parameter>
  <parameter name="HCalToEMGeVCalibration" type="float">1.02373335516</parameter>
  <parameter name="ECalToHadGeVCalibrationBarrel" type="float">1.24223718397</parameter>
  <parameter name="ECalToHadGeVCalibrationEndCap" type="float">1.24223718397</parameter>
  <parameter name="HCalToHadGeVCalibration" type="float">1.01799349172</parameter>
  <parameter name="MuonToMipCalibration" type="float">19607.8</parameter>
  <parameter name="DigitalMuonHits" type="int">0</parameter>
  <parameter name="MaxHCalHitHadronicEnergy" type="float">1000000</parameter>
  <!--Whether to calculate track states manually, rather than copy stored fitter values-->
  <parameter name="UseOldTrackStateCalculation" type="int">0 </parameter>
  <parameter name="NEventsToSkip" type="int">0</parameter>
  <parameter name="Verbosity" options="DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT"> WARNING</parameter>
  <!--Energy Corrections in Marlin Pandora-->
  <!--parameter name="InputEnergyCorrectionPoints" type="FloatVec">InputEnergyCorrectionPoints_XXXX</parameter-->
  <!--parameter name="OutputEnergyCorrectionPoints" type="FloatVec">OutputEnergyCorrectionPoints_XXXX</parameter-->

  <!--Decides whether to create gaps in the geometry (ILD-specific)-->
  <parameter name="CreateGaps" type="bool">false </parameter>

  <!--Track quality settings: need to be optimized! More in processor-->
  <!--Cut on fractional of expected number of BarrelTracker hits-->
  <parameter name="MinBarrelTrackerHitFractionOfExpected" type="int">0 </parameter>
  <!--Cut on minimum number of FTD hits of BarrelTracker hit fraction to be applied-->
  <parameter name="MinFtdHitsForBarrelTrackerHitFraction" type="int">0 </parameter>
  <!--Track quality cut: the minimum number of ftd track hits for ftd only tracks-->
  <parameter name="MinFtdTrackHits" type="int">0 </parameter>
  <!--Min track momentum required to perform final quality checks on number of hits-->
  <parameter name="MinMomentumForTrackHitChecks" type="float">0 </parameter>
  <!--Cut on fractional of expected number of TPC hits-->
  <parameter name="MinTpcHitFractionOfExpected" type="float">0 </parameter>
  <!--Sanity check on separation between ip and track projected ecal position-->
  <parameter name="MinTrackECalDistanceFromIp" type="float">0 </parameter>
  <!--Track quality cut: the minimum number of track hits-->
  <parameter name="MinTrackHits" type="int">0 </parameter>

  <!-- MORE TRACKING  CUTS -->
  <!--Max distance from track to BarrelTracker r max to id whether track reaches ecal-->
  <parameter name="ReachesECalBarrelTrackerOuterDistance" type="float">-100 </parameter>
  <!--Max distance from track to BarrelTracker z max to id whether track reaches ecal-->
  <parameter name="ReachesECalBarrelTrackerZMaxDistance" type="float">-50 </parameter>
  <!--Max distance from track hit to ftd z position to identify ftd hits-->
  <parameter name="ReachesECalFtdZMaxDistance" type="float">1 </parameter>
  <!--Min FTD layer for track to be considered to have reached ecal-->
  <parameter name="ReachesECalMinFtdLayer" type="int">0 </parameter>
  <!--Minimum number of BarrelTracker hits to consider track as reaching ecal-->
  <parameter name="ReachesECalNBarrelTrackerHits" type="int">0 </parameter>
  <!--Minimum number of ftd hits to consider track as reaching ecal-->
  <parameter name="ReachesECalNFtdHits" type="int">0 </parameter>
  <!--Maximum energy for unmatched vertex track-->

  
  <parameter name="UnmatchedVertexTrackMaxEnergy" type="float">5 </parameter> <!--here is the problem child-->

  
  <!--Whether can form pfos from tracks that don't start at vertex-->
  <parameter name="UseNonVertexTracks" type="int">1 </parameter>
  <!--Whether to calculate track states manually, rather than copy stored fitter values-->
  <parameter name="UseOldTrackStateCalculation" type="int">0 </parameter>
  <!--Whether can form pfos from unmatched tracks that don't start at vertex-->
  <parameter name="UseUnmatchedNonVertexTracks" type="int">0 </parameter>
  <!--Whether can form pfos from unmatched tracks that start at vertex-->
  <parameter name="UseUnmatchedVertexTracks" type="int">1 </parameter>
  <!--Track z0 cut used to determine whether track can be used to form pfo-->
  <parameter name="Z0TrackCut" type="float">200 </parameter>
  <!--z0 cut used to determine whether unmatched vertex track can form pfo-->
  <parameter name="Z0UnmatchedVertexTrackCut" type="float">5 </parameter>
  <!--Non vtx track z cut to determine whether track can be used to form pfo-->
  <parameter name="ZCutForNonVertexTracks" type="float">250 </parameter>
  <!--Track quality cut: the maximum number of track hits-->
  <parameter name="MaxTrackHits" type="int">5000 </parameter>
  <!--Cut on fractional track momentum error-->
  <parameter name="MaxTrackSigmaPOverP" type="float">0.15 </parameter>
  <!--Constant relating track curvature in b field to momentum-->
  <parameter name="CurvatureToMomentumFactor" type="float">0.00015 </parameter>
  <!--Track d0 cut used to determine whether track can be used to form pfo-->
  <parameter name="D0TrackCut" type="float">200 </parameter>
  <!--d0 cut used to determine whether unmatched vertex track can form pfo-->
  <parameter name="D0UnmatchedVertexTrackCut" type="float">5 </parameter>

  <!--The algorithm name for filling start vertex-->
  <parameter name="StartVertexAlgorithmName" type="string">PandoraPFANew </parameter>
  <!--Start Vertex Collection Name-->
  <parameter name="StartVertexCollectionName" type="string" lcioOutType="Vertex"> PandoraStartVertices </parameter>

  <!--Normal vector for the muon barrel sensitive layers in local coordinates-->
  <parameter name="YokeBarrelNormalVector" type="FloatVec">0 0 1  </parameter>
  <!--Normal vector for the HCal barrel sensitive layers in local coordinates-->
  <parameter name="HCalBarrelNormalVector" type="FloatVec">0 0 1  </parameter>
  <!--Normal vector for the ECal barrel sensitive layers in local coordinates-->
  <parameter name="ECalBarrelNormalVector" type="FloatVec">0 0 1  </parameter>
  <!--The bfield in the muon barrel, units Tesla-->
  <parameter name="MuonBarrelBField" type="float">-1.34 </parameter>
  <!--The bfield in the muon endcap, units Tesla-->
  <parameter name="MuonEndCapBField" type="float">0.01 </parameter>

  <!--The constant term for EM shower-->
  <parameter name="EMConstantTerm" type="float">0.01 </parameter>
  <!--The stochastic term for EM shower-->
  <parameter name="EMStochasticTerm" type="float">0.17 </parameter>
  <!--The constant term for Hadronic shower-->
  <parameter name="HadConstantTerm" type="float">0.03 </parameter>
  <!--The stochastic term for Hadronic shower-->
  <parameter name="HadStochasticTerm" type="float">0.6 </parameter>

  <!--The input energy points for hadronic energy correction-->
  <parameter name="InputEnergyCorrectionPoints" type="FloatVec"> </parameter>

  <!--Maximum number of layers from candidate outer layer hit to rear of detector-->
  <parameter name="LayersFromEdgeMaxRearDistance" type="float">250 </parameter>
  <!--Number of layers from edge for hit to be flagged as an outer layer hit-->
  <parameter name="NOuterSamplingLayers" type="int">3 </parameter>
  <!--Distance of possible second track state in the ECal Endcap to the ECal barrel inner radius-->
  <parameter name="TrackStateTolerance" type="float">0 </parameter>

  <!--Track cut on distance from BarrelTracker inner r to id whether track can form pfo-->
  <parameter name="MaxBarrelTrackerInnerRDistance" type="float">200 </parameter>

  <!--The minimum correction to on ecal hit in Pandora energy correction-->
  <parameter name="MinCleanCorrectedHitEnergy" type="float">0.1 </parameter>
  <!--The minimum hit energy to apply ecal correction in Pandora energy correction-->
  <parameter name="MinCleanHitEnergy" type="float">0.5 </parameter>
  <!--The minimum hit energy fraction to apply ecal correction in Pandora energy correction-->
  <parameter name="MinCleanHitEnergyFraction" type="float">0.01 </parameter>

  <!--The energy for a digital muon calorimeter hit, units GeV-->
  <parameter name="MuonHitEnergy" type="float">0.5 </parameter>

  <!--Whether to form pandora track relationships using v0 and kink info-->
  <parameter name="ShouldFormTrackRelationships" type="int">1 </parameter>

  <!--The name of the DDTrackCreator implementation-->
  <parameter name="TrackCreatorName" type="string">DDTrackCreatorCLIC </parameter>
  <!--Name of the track fitting system to be used (KalTest, DDKalTest, aidaTT, ... )-->
  <parameter name="TrackSystemName" type="string">DDKalTest </parameter>
  <!--The output energy points for hadronic energy correction-->
  <parameter name="OutputEnergyCorrectionPoints" type="FloatVec"> </parameter>


  <!--To use scintillator layers ~ hybrid ECAL, this should be true-->
  <parameter name="UseEcalScLayers" type="int">0 </parameter>
  <!--Threshold for creating calo hits in the Sc-layers of ECAL, units mip-->
  <parameter name="ECalScMipThreshold" type="float">0 </parameter>
  <!--The calibration from deposited Sc-layer energy to EM energy-->
  <parameter name="ECalScToEMGeVCalibration" type="float">1 </parameter>
  <!--The calibration from deposited Sc-layer energy to the barrel hadronic energy-->
  <parameter name="ECalScToHadGeVCalibrationBarrel" type="float">1 </parameter>
  <!--The calibration from deposited Sc-layer energy on the endcaps to hadronic energy-->
  <parameter name="ECalScToHadGeVCalibrationEndCap" type="float">1 </parameter>
  <!--The calibration from deposited Sc-layer energy to mip-->
  <parameter name="ECalScToMipCalibration" type="float">1 </parameter>
  <!--Threshold for creating calo hits in the Si-layers of ECAL, units mip-->
  <parameter name="ECalSiMipThreshold" type="float">0 </parameter>
  <!--The calibration from deposited Si-layer energy to EM energy-->
  <parameter name="ECalSiToEMGeVCalibration" type="float">1 </parameter>
  <!--The calibration from deposited Si-layer energy on the barrel to hadronic energy-->
  <parameter name="ECalSiToHadGeVCalibrationBarrel" type="float">1 </parameter>
  <!--The calibration from deposited Si-layer energy on the enecaps to hadronic energy-->
  <parameter name="ECalSiToHadGeVCalibrationEndCap" type="float">1 </parameter>
  <!--The calibration from deposited Si-layer energy to mip-->
  <parameter name="ECalSiToMipCalibration" type="float">1 </parameter>
  <!--To use strip splitting algorithm, this should be true-->
  <parameter name="StripSplittingOn" type="int">0 </parameter>

</processor>

  <processor name="DDSimpleMuonDigi" type="DDSimpleMuonDigi">
    <!--Performs simple digitization of sim calo hits...-->
    <!--Calibration coefficients for MUON-->
    <parameter name="CalibrMUON" type="FloatVec">70.1</parameter>
    <!-- maximum hit energy for a MUON hit -->
    <parameter name="MaxHitEnergyMUON" type="float">2.0</parameter>
    <!--MUON Collection Names-->
    <parameter name="MUONCollections" type="StringVec">
    YokeBarrelCollection YokeEndcapCollection</parameter>
    <!--MUON Collection of real Hits-->
    <parameter name="MUONOutputCollection" type="string">MUON </parameter>
    <!--Threshold for MUON Hits in GeV-->
    <parameter name="MuonThreshold" type="float">1e-06 </parameter>
    <!--MuonHit Relation Collection-->
    <parameter name="RelationOutputCollection" type="string">RelationMuonHit </parameter>
  </processor>
    


  <!--==========PFO==========-->
  <group name="PfoSelector">
    <!--Selects Pfos from full PFO list using timing cuts-->
    <!--ChargedPfoLooseTimingCut-->
    <parameter name="ChargedPfoLooseTimingCut" type="float">3 </parameter>
    <!--ChargedPfoNegativeLooseTimingCut-->
    <parameter name="ChargedPfoNegativeLooseTimingCut" type="float">-1 </parameter>
    <!--ChargedPfoNegativeTightTimingCut-->
    <parameter name="ChargedPfoNegativeTightTimingCut" type="float">-0.5 </parameter>
    <!--ChargedPfoPtCut-->
    <parameter name="ChargedPfoPtCut" type="float">0 </parameter>
    <!--ChargedPfoPtCutForLooseTiming-->
    <parameter name="ChargedPfoPtCutForLooseTiming" type="float">4 </parameter>
    <!--ChargedPfoTightTimingCut-->
    <parameter name="ChargedPfoTightTimingCut" type="float">1.5 </parameter>
    <!--CheckKaonCorrection-->
    <parameter name="CheckKaonCorrection" type="int">0 </parameter>
    <!--CheckProtonCorrection-->
    <parameter name="CheckProtonCorrection" type="int">0 </parameter>
    <!--ClusterLessPfoTrackTimeCut-->
    <parameter name="ClusterLessPfoTrackTimeCut" type="float">10 </parameter>
    <!--CorrectHitTimesForTimeOfFlight-->
    <parameter name="CorrectHitTimesForTimeOfFlight" type="int">0 </parameter>
    <!--DisplayRejectedPfos-->
    <parameter name="DisplayRejectedPfos" type="int">1 </parameter>
    <!--DisplaySelectedPfos-->
    <parameter name="DisplaySelectedPfos" type="int">1 </parameter>
    <!--FarForwardCosTheta-->
    <parameter name="FarForwardCosTheta" type="float">0.975 </parameter>
    <!--ForwardCosThetaForHighEnergyNeutralHadrons-->
    <parameter name="ForwardCosThetaForHighEnergyNeutralHadrons" type="float">0.95 </parameter>
    <!--ForwardHighEnergyNeutralHadronsEnergy-->
    <parameter name="ForwardHighEnergyNeutralHadronsEnergy" type="float">10 </parameter>
    <!--HCalBarrelLooseTimingCut-->
    <parameter name="HCalBarrelLooseTimingCut" type="float">20 </parameter>
    <!--HCalBarrelTightTimingCut-->
    <parameter name="HCalBarrelTightTimingCut" type="float">10 </parameter>
    <!--HCalEndCapTimingFactor-->
    <parameter name="HCalEndCapTimingFactor" type="float">1 </parameter>
    <!--Input PFO Collection-->
    <parameter name="InputPfoCollection" type="string" lcioInType="ReconstructedParticle">PandoraPFOs </parameter>
    <!--KeepKShorts-->
    <parameter name="KeepKShorts" type="int">1 </parameter>
    <!--MaxMomentumForClusterLessPfos-->
    <parameter name="MaxMomentumForClusterLessPfos" type="float">2 </parameter>
    <!--MinECalHitsForTiming-->
    <parameter name="MinECalHitsForTiming" type="int">5 </parameter>
    <!--MinHCalEndCapHitsForTiming-->
    <parameter name="MinHCalEndCapHitsForTiming" type="int">5 </parameter>
    <!--MinMomentumForClusterLessPfos-->
    <parameter name="MinMomentumForClusterLessPfos" type="float">0.5 </parameter>
    <!--MinPtForClusterLessPfos-->
    <parameter name="MinPtForClusterLessPfos" type="float">0.5 </parameter>
    <!--MinimumEnergyForNeutronTiming-->
    <parameter name="MinimumEnergyForNeutronTiming" type="float">1 </parameter>
    <!--Monitoring-->
    <parameter name="Monitoring" type="int">0 </parameter>
    <!--MonitoringPfoEnergyToDisplay-->
    <parameter name="MonitoringPfoEnergyToDisplay" type="float">1 </parameter>
    <!--NeutralFarForwardLooseTimingCut-->
    <parameter name="NeutralFarForwardLooseTimingCut" type="float">2 </parameter>
    <!--NeutralFarForwardTightTimingCut-->
    <parameter name="NeutralFarForwardTightTimingCut" type="float">1 </parameter>
    <!--NeutralHadronBarrelPtCutForLooseTiming-->
    <parameter name="NeutralHadronBarrelPtCutForLooseTiming" type="float">3.5 </parameter>
    <!--NeutralHadronLooseTimingCut-->
    <parameter name="NeutralHadronLooseTimingCut" type="float">2.5 </parameter>
    <!--NeutralHadronPtCut-->
    <parameter name="NeutralHadronPtCut" type="float">0 </parameter>
    <!--NeutralHadronPtCutForLooseTiming-->
    <parameter name="NeutralHadronPtCutForLooseTiming" type="float">8 </parameter>
    <!--NeutralHadronTightTimingCut-->
    <parameter name="NeutralHadronTightTimingCut" type="float">1.5 </parameter>
    <!--PhotonFarForwardLooseTimingCut-->
    <parameter name="PhotonFarForwardLooseTimingCut" type="float">2 </parameter>
    <!--PhotonFarForwardTightTimingCut-->
    <parameter name="PhotonFarForwardTightTimingCut" type="float">1 </parameter>
    <!--PhotonLooseTimingCut-->
    <parameter name="PhotonLooseTimingCut" type="float">2 </parameter>
    <!--PhotonPtCut-->
    <parameter name="PhotonPtCut" type="float">0 </parameter>
    <!--PhotonPtCutForLooseTiming-->
    <parameter name="PhotonPtCutForLooseTiming" type="float">4 </parameter>
    <!--PhotonTightTimingCut-->
    <parameter name="PhotonTightTimingCut" type="float">1 </parameter>
    <!--PtCutForTightTiming-->
    <parameter name="PtCutForTightTiming" type="float">0.75 </parameter>
    <!--Selected pfo collection name-->
    <parameter name="SelectedPfoCollection" type="string" lcioOutType="ReconstructedParticle">SelectedPandoraPFOs </parameter>
    <!--UseClusterLessPfos-->
    <parameter name="UseClusterLessPfos" type="int">1 </parameter>
    <!--UseNeutronTiming-->
    <parameter name="UseNeutronTiming" type="int">0 </parameter>
    <!--verbosity level of this processor ("DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT")-->
    <parameter name="Verbosity" type="string">ERROR </parameter>

    <processor name="CLICPfoSelectorDefault_HE" type="CLICPfoSelector">
      <parameter name="SelectedPfoCollection" type="string" lcioOutType="ReconstructedParticle"> SelectedPandoraPFOs </parameter>
    </processor>

    <processor name="CLICPfoSelectorLoose_HE" type="CLICPfoSelector">
      <!--Selects Pfos from full PFO list using timing cuts-->
      <!--ChargedPfoNegativeLooseTimingCut-->
      <parameter name="ChargedPfoNegativeLooseTimingCut" type="float">-2.0</parameter>
      <!--ChargedPfoNegativeTightTimingCut-->
      <parameter name="ChargedPfoNegativeTightTimingCut" type="float">-2.0</parameter>
      <!-- ClusterLessPfoTrackTimeCut -->
      <parameter name = "ClusterLessPfoTrackTimeCut" type="float">1000.</parameter>
      <!--MinMomentumForClusterLessPfos-->
      <parameter name="MinMomentumForClusterLessPfos" type="float">0.0 </parameter>
      <!--MaxMomentumForClusterLessPfos-->
      <parameter name="MinPtForClusterLessPfos" type="float">0.25 </parameter>
      <!--MinimumEnergyForNeutronTiming-->
      <!--NeutralFarForwardLooseTimingCut-->
      <parameter name="NeutralFarForwardLooseTimingCut" type="float">2.5 </parameter>
      <!--NeutralFarForwardTightTimingCut-->
      <parameter name="NeutralFarForwardTightTimingCut" type="float">1.5 </parameter>
      <!--PhotonLooseTimingCut-->
      <parameter name="PhotonLooseTimingCut" type="float">2. </parameter>
      <!--PhotonTightTimingCut-->
      <parameter name="PhotonTightTimingCut" type="float">2. </parameter>
      <!--Selected pfo collection name-->
      <parameter name="SelectedPfoCollection" type="string" lcioOutType="ReconstructedParticle">LooseSelectedPandoraPFOs </parameter>
      <parameter name="Monitoring" type="int">0</parameter>
    </processor>

    <processor name="CLICPfoSelectorTight_HE" type="CLICPfoSelector">
      <!--Selects Pfos from full PFO list using timing cuts-->
      <!--ChargedPfoLooseTimingCut-->
      <parameter name="ChargedPfoLooseTimingCut" type="float">2.0 </parameter>
      <!--ChargedPfoNegativeLooseTimingCut-->
      <parameter name="ChargedPfoNegativeLooseTimingCut" type="float">-0.5 </parameter>
      <!--ChargedPfoNegativeTightTimingCut-->
      <parameter name="ChargedPfoNegativeTightTimingCut" type="float">-0.25 </parameter>
      <!--ChargedPfoTightTimingCut-->
      <parameter name="ChargedPfoTightTimingCut" type="float">1.0 </parameter>
      <!--FarForwardCosTheta-->
      <parameter name="FarForwardCosTheta" type="float">0.95 </parameter>
      <!--MaxMomentumForClusterLessPfos-->
      <parameter name="MaxMomentumForClusterLessPfos" type="float">1.5 </parameter>
      <!--MinPtForClusterLessPfos-->
      <parameter name="MinPtForClusterLessPfos" type="float">1.0 </parameter>
      <!--NeutralFarForwardLooseTimingCut-->
      <parameter name="NeutralFarForwardLooseTimingCut" type="float">1.5 </parameter>
      <!--NeutralHadronPtCut-->
      <parameter name="NeutralHadronPtCut" type="float">0.5 </parameter>
      <!--PhotonPtCut-->
      <parameter name="PhotonPtCut" type="float">0.2 </parameter>
      <!--PtCutForTightTiming-->
      <parameter name="PtCutForTightTiming" type="float">1.0 </parameter>
      <!--Selected pfo collection name-->
      <parameter name="SelectedPfoCollection" type="string" lcioOutType="ReconstructedParticle">TightSelectedPandoraPFOs </parameter>
      <!--UseClusterLessPfos-->
      <parameter name="UseClusterLessPfos" type="int">0 </parameter>
      <parameter name="Monitoring" type="int">0</parameter>
    </processor>

    <processor name="CLICPfoSelectorDefault_LE" type="CLICPfoSelector">
      <!--Selects Pfos from full PFO list using timing cuts-->
      <!--Selected pfo collection name-->
      <parameter name="SelectedPfoCollection" type="string" lcioOutType="ReconstructedParticle">
        LE_SelectedPandoraPFOs
      </parameter>
      <!-- <parameter name="ChargedPfoPtCutForTightTiming" type="float">1.0</parameter> -->
      <!-- <parameter name="NeutralHadronPtCutForTightTiming" type="float">1.0</parameter> -->
      <!-- <parameter name="PhotonPtCutForTightTiming" type="float">1.0</parameter> -->
      <parameter name="NeutralHadronPtCut" type="float">0.0</parameter>
      <parameter name="NeutralHadronPtCutForLooseTiming" type="float">2.0</parameter>
      <parameter name="NeutralHadronLooseTimingCut" type="float">5.0</parameter>
      <parameter name="NeutralHadronTightTimingCut" type="float">2.5</parameter>
      <parameter name="PhotonPtCut" type="float">0.0</parameter>
      <parameter name="PhotonPtCutForLooseTiming" type="float">2.0</parameter>
      <parameter name="PhotonLooseTimingCut" type="float">5.0</parameter>
      <parameter name="PhotonTightTimingCut" type="float">1.0</parameter>
      <parameter name="ChargedPfoPtCut" type="float">0.0</parameter>
      <parameter name="ChargedPfoPtCutForLooseTiming" type="float">4.0</parameter>
      <parameter name="ChargedPfoLooseTimingCut" type="float">10.0</parameter>
      <parameter name="ChargedPfoTightTimingCut" type="float">3.0</parameter>
      <parameter name="ChargedPfoNegativeLooseTimingCut" type="float">-5.0</parameter>
      <parameter name="ChargedPfoNegativeTightTimingCut" type="float">-2.0</parameter>
      <parameter name="ClusterLessPfoTrackTimeCut" type="float">10.</parameter>
      <parameter name="MinMomentumForClusterLessPfos" type="float">0.0 </parameter>
      <parameter name="MaxMomentumForClusterLessPfos" type="float">5.0 </parameter>
      <parameter name="MinPtForClusterLessPfos" type="float">0.0 </parameter>
      <parameter name="NeutralFarForwardLooseTimingCut" type="float">4.0 </parameter>
      <parameter name="NeutralFarForwardTightTimingCut" type="float">2.0 </parameter>
      <parameter name="HCalBarrelLooseTimingCut" type="float">5 </parameter>
      <parameter name="HCalBarrelTightTimingCut" type="float">2.5 </parameter>
    </processor>

    <processor name="CLICPfoSelectorLoose_LE" type="CLICPfoSelector">
      <!--Selects Pfos from full PFO list using timing cuts-->
      <!--Input PFO Collection-->
      <parameter name="SelectedPfoCollection" type="string" lcioOutType="ReconstructedParticle">
        LE_LooseSelectedPandoraPFOs
      </parameter>
      <parameter name="NeutralHadronPtCut" type="float">0.0</parameter>
      <!-- <parameter name="NeutralHadronPtCutForTightTiming" type="float">0.75</parameter> -->
      <!-- <parameter name="PhotonPtCutForTightTiming" type="float">0.75</parameter> -->
      <!-- <parameter name="ChargedPfoPtCutForTightTiming" type="float">1.0</parameter> -->
      <parameter name="NeutralHadronPtCutForLooseTiming" type="float">2.0</parameter>
      <parameter name="NeutralHadronLooseTimingCut" type="float">10.0</parameter>
      <parameter name="NeutralHadronTightTimingCut" type="float">5.0</parameter>
      <parameter name="PhotonPtCut" type="float">0.0</parameter>
      <parameter name="PhotonPtCutForLooseTiming" type="float">2.0</parameter>
      <parameter name="PhotonLooseTimingCut" type="float">10.0</parameter>
      <parameter name="PhotonTightTimingCut" type="float">2.5</parameter>
      <parameter name="ChargedPfoPtCut" type="float">0.0</parameter>
      <parameter name="ChargedPfoPtCutForLooseTiming" type="float">4.0</parameter>
      <parameter name="ChargedPfoLooseTimingCut" type="float">10.0</parameter>
      <parameter name="ChargedPfoTightTimingCut" type="float">5.0</parameter>
      <parameter name="ChargedPfoNegativeLooseTimingCut" type="float">-20.0</parameter>
      <parameter name="ChargedPfoNegativeTightTimingCut" type="float">-20.0</parameter>
      <parameter name="ClusterLessPfoTrackTimeCut" type="float">50.</parameter>
      <parameter name="MinMomentumForClusterLessPfos" type="float">0.0 </parameter>
      <parameter name="MaxMomentumForClusterLessPfos" type="float">5.0 </parameter>
      <parameter name="MinPtForClusterLessPfos" type="float">0.0 </parameter>
      <parameter name="NeutralFarForwardLooseTimingCut" type="float">10.0 </parameter>
      <parameter name="NeutralFarForwardTightTimingCut" type="float">5.0 </parameter>
      <parameter name="HCalBarrelLooseTimingCut" type="float">10 </parameter>
      <parameter name="HCalBarrelTightTimingCut" type="float">5 </parameter>
    </processor>

        <processor name="CLICPfoSelectorTight_LE" type="CLICPfoSelector">
      <!--Selects Pfos from full PFO list using timing cuts-->
      <!--Input PFO Collection-->
      <parameter name="SelectedPfoCollection" type="string" lcioOutType="ReconstructedParticle">
        LE_TightSelectedPandoraPFOs
      </parameter>
      <parameter name = "NeutralHadronPtCut" type="float">0.0</parameter>
      <!-- <parameter name = "NeutralHadronPtCutForTightTiming" type="float">1.0</parameter> -->
      <!-- <parameter name = "PhotonPtCutForTightTiming" type="float">1.0</parameter> -->
      <!-- <parameter name = "ChargedPfoPtCutForTightTiming" type="float">1.5</parameter> -->
      <parameter name="NeutralHadronPtCutForLooseTiming" type="float">3.0</parameter>
      <parameter name="NeutralHadronLooseTimingCut" type="float">4.0</parameter>
      <parameter name="NeutralHadronTightTimingCut" type="float">2.0</parameter>
      <parameter name="PhotonPtCut" type="float">0.0</parameter>
      <parameter name="PhotonPtCutForLooseTiming" type="float">2.0</parameter>
      <parameter name="PhotonLooseTimingCut" type="float">1.0</parameter>
      <parameter name="PhotonTightTimingCut" type="float">1.0</parameter>
      <parameter name="ChargedPfoPtCut" type="float">0.0</parameter>
      <parameter name="ChargedPfoPtCutForLooseTiming" type="float">3.0</parameter>
      <parameter name="ChargedPfoLooseTimingCut" type="float">4.0</parameter>
      <parameter name="ChargedPfoTightTimingCut" type="float">2.0</parameter>
      <parameter name="ChargedPfoNegativeLooseTimingCut" type="float">-2.0</parameter>
      <parameter name="ChargedPfoNegativeTightTimingCut" type="float">-1.0</parameter>
      <parameter name="ClusterLessPfoTrackTimeCut" type="float">10.</parameter>
      <parameter name="MinMomentumForClusterLessPfos" type="float">0.0 </parameter>
      <parameter name="MaxMomentumForClusterLessPfos" type="float">5.0 </parameter>
      <parameter name="MinPtForClusterLessPfos" type="float">0.75 </parameter>
      <parameter name="NeutralFarForwardLooseTimingCut" type="float">2.0 </parameter>
      <parameter name="NeutralFarForwardTightTimingCut" type="float">2.0 </parameter>
      <parameter name="HCalBarrelLooseTimingCut" type="float">4 </parameter>
      <parameter name="HCalBarrelTightTimingCut" type="float">2 </parameter>
    </processor>

  </group>


  <!--==========TAUS============-->
  <processor name="MyTauFinder" type="TauFinder">
  <!--TauFinder writes tau candidates as ReconstructedParticles into collection. It runs on a collection of ReconstructedParticels, if you want  to run on MCParticles you have to convert them before hand (use e.g. PrepareRECParticles processor)-->
  <!--Name of the Signal output file -->
  <parameter name="FileName_Signal" type="string">Taus.root </parameter>
  <!--Collection of PFOs-->
  <parameter name="PFOCollection" type="string" lcioInType="ReconstructedParticle">PandoraPFOs </parameter>
  <!--Collection of Tau Candidates-->
  <parameter name="TauRecCollection" type="string" lcioOutType="ReconstructedParticle">TauRec_PFO </parameter>
  <!--Name of the Tau link to ReconstructedParticle collection-->
  <parameter name="TauRecLinkCollectionName" type="string" lcioOutType="LCRelation">TauRecLink_PFO </parameter>
  <!--Collection of Particles in Rest Group not in Tau Candidates-->
  <parameter name="TauRecRestCollection" type="string" lcioOutType="ReconstructedParticle">TauRecRest_PFO </parameter>
  <!--verbosity level of this processor ("DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT")-->
  <parameter name="Verbosity" type="string">DEBUG </parameter>
  <!--Cut on cosT to suppress background-->
  <parameter name="cosT_cut" type="float">0.99 </parameter>
  <!--Upper limit on invariant mass of tau candidate-->
  <parameter name="invariant_mass" type="float">2 </parameter>
  <!--Outer isolation cone around search cone of tau jet in rad (relativ to cone angle)-->
  <parameter name="isolationConeAngle" type="float">0.2 </parameter>
  <!--Energy allowed within isolation cone region-->
  <parameter name="isolationEnergy" type="float">5 </parameter>
  <!--Cut on pt to suppress background-->
  <parameter name="pt_cut" type="float">0.1 </parameter>
  <!--Minimum tranverse momentum of tau seed-->
  <parameter name="ptseed" type="float">5.0 </parameter>
  <!--Opening angle of the search cone for tau jet in rad-->
  <parameter name="searchConeAngle" type="float">0.05 </parameter>
  </processor>

  <processor name="MyTaJetClustering" type="TaJetClustering">
  <!--Tau Jet Finding-->
  <!--Low energy tracks can be accepted as either charged and neutral if true-->
  <parameter name="AcceptFlexibleLowEnergyTrack" type="int">0 </parameter>
  <!--Maximum cosine angle for cone-->
  <parameter name="ConeMaxCosAngle" type="double">1 </parameter>
  <!--Energy fraction of cone compared to central-->
  <parameter name="ConeMaxEnergyFrac" type="double">0.1 </parameter>
  <!--Minimum cosine angle for cone-->
  <parameter name="ConeMinCosAngle" type="double">0.9 </parameter>
  <!--Reject 3-prong taus if including neutral energy more than this number in GeV-->
  <parameter name="MaximumNeutralEnergyIn3Prong" type="double">100 </parameter>
  <!--Minimum jet energy to be accepted as taus-->
  <parameter name="MinimumJetEnergy" type="double">1 </parameter>
  <!--Minimum track energy to be accepted as taus-->
  <parameter name="MinimumTrackEnergy" type="double">1 </parameter>
  <!--Minimum track energy to be counted-->
  <parameter name="MinimumTrackEnergyAssoc" type="double">1 </parameter>
  <!--Neither primary nor cone cut at all if true. Only clustering.-->
  <parameter name="NoSelection" type="int">0 </parameter>
  <!--Tau output collection-->
  <parameter name="OutputTauCollection" type="string" lcioOutType="ReconstructedParticle">TaJets </parameter>
  <!--PandoraPFA PFO collection-->
  <parameter name="PFOCollection" type="string" lcioInType="ReconstructedParticle">PandoraPFOs </parameter>
  <!--Remained PFO collection-->
  <parameter name="RemainPFOCollection" type="string" lcioOutType="ReconstructedParticle">RemainPFOs </parameter>
  <!--Allowed cosine angle to be clustered-->
  <parameter name="TauCosAngle" type="double">0.98 </parameter>
  <!--Tau mass for tau clustering [GeV]-->
  <parameter name="TauMass" type="double">2 </parameter>
  <!--verbosity level of this processor ("DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT")-->
  <parameter name="Verbosity" type="string">ERROR </parameter>
</processor>

<!--=========AIDA========-->
  <processor name="MyAIDAProcessor" type="AIDAProcessor">
    <!--Processor that handles AIDA files. Creates on directory per processor.  Processors only need to create and fill the histograms, clouds and tuples. Needs to be the first ActiveProcessor-->
    <!-- compression of output file 0: false >0: true (default) -->
    <parameter name="Compress" type="int" value="1"/>
    <!-- filename without extension-->
    <parameter name="FileName" type="string" value="tauHists"/>
    <!-- type of output file xml (default) or root ( only OpenScientist)-->
    <parameter name="FileType" type="string" value="root "/>
  </processor>
  




</marlin>
